{"version":3,"sources":["../../cli-astro-commands/src/components/PromoteCommand/index.ts","../../cli-astro-commands/src/components/PromoteCommand/PromoteCommand.tsx","../../cli-astro-commands/src/components/PromoteCommand/Steps/CreatePreview.tsx"],"sourcesContent":["export { PromoteCommand } from './PromoteCommand.js';\n","import React from 'react';\nimport type { FC } from 'react';\nimport { match } from 'variant';\nimport { useARMClient } from '@wix/arm-client';\nimport { Alert, Spinner, useAsyncCallback } from '@wix/cli-ui-kit';\nimport { useProjectModel } from '../../model.js';\nimport { CreatePreview } from './Steps/CreatePreview.js';\n\ninterface PromoteCommandProps {\n  baseUrl?: string;\n  label?: string;\n}\n\nexport const PromoteCommand: FC<PromoteCommandProps> = ({ baseUrl, label }) => {\n  const {\n    model: {\n      config: { appId },\n    },\n  } = useProjectModel();\n\n  const arm = useARMClient();\n\n  const promoteAction = useAsyncCallback(async (_, tag: string) => {\n    await arm.createDraftVersion(appId, tag);\n  });\n\n  function onPreviewCreated({ previewId }: { previewId: string }) {\n    return promoteAction.execute(previewId);\n  }\n\n  return (\n    <>\n      <CreatePreview\n        baseUrl={baseUrl}\n        label={label}\n        onCreated={({ previewId }) => onPreviewCreated({ previewId })}\n      />\n      {match(promoteAction.status, {\n        Loading: () => <Spinner text={`Promoting app draft...`} />,\n        Success: () => (\n          <Alert type=\"success\">App draft promoted successfully</Alert>\n        ),\n        Error: () => null,\n        NotRequested: () => null,\n      })}\n    </>\n  );\n};\n","import React from 'react';\nimport type { FC } from 'react';\nimport { Box, Text } from '@wix/cli-ui-kit';\nimport { PreviewCommand } from '../../PreviewCommand/index.js';\n\ninterface CreatePreviewProps {\n  baseUrl?: string;\n  label?: string;\n  onCreated: (args: { previewId: string; previewUrl: string }) => void;\n}\n\nexport const CreatePreview: FC<CreatePreviewProps> = (props) => {\n  const { baseUrl, label, onCreated } = props;\n\n  return (\n    <Box flexDirection=\"column\" gap={1}>\n      <Text>Before promoting, let's create a preview of your app</Text>\n      <Box flexDirection=\"column\">\n        <PreviewCommand\n          baseUrl={baseUrl}\n          label={label}\n          onPreviewCreated={onCreated}\n          environment=\"preview\"\n        />\n      </Box>\n    </Box>\n  );\n};\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;ACAA;AAAA,IAAAA,gBAAkB;AAElB,qBAAsB;;;ACFtB;AAAA,mBAAkB;AAWX,IAAM,gBAAwC,CAAC,UAAU;AAC9D,QAAM,EAAE,SAAS,OAAO,UAAU,IAAI;AAEtC,SACE,6BAAAC,QAAA,cAAC,eAAI,eAAc,UAAS,KAAK,KAC/B,6BAAAA,QAAA,cAAC,YAAK,sDAAoD,GAC1D,6BAAAA,QAAA,cAAC,eAAI,eAAc,YACjB,6BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA,kBAAkB;AAAA,MAClB,aAAY;AAAA;AAAA,EACd,CACF,CACF;AAEJ;;;ADdO,IAAM,iBAA0C,CAAC,EAAE,SAAS,MAAM,MAAM;AAC7E,QAAM;AAAA,IACJ,OAAO;AAAA,MACL,QAAQ,EAAE,MAAM;AAAA,IAClB;AAAA,EACF,IAAI,gBAAgB;AAEpB,QAAM,MAAM,aAAa;AAEzB,QAAM,gBAAgB,iBAAiB,OAAO,GAAG,QAAgB;AAC/D,UAAM,IAAI,mBAAmB,OAAO,GAAG;AAAA,EACzC,CAAC;AAED,WAAS,iBAAiB,EAAE,UAAU,GAA0B;AAC9D,WAAO,cAAc,QAAQ,SAAS;AAAA,EACxC;AAEA,SACE,8BAAAC,QAAA,4BAAAA,QAAA,gBACE,8BAAAA,QAAA;AAAA,IAAC;AAAA;AAAA,MACC;AAAA,MACA;AAAA,MACA,WAAW,CAAC,EAAE,UAAU,MAAM,iBAAiB,EAAE,UAAU,CAAC;AAAA;AAAA,EAC9D,OACC,sBAAM,cAAc,QAAQ;AAAA,IAC3B,SAAS,MAAM,8BAAAA,QAAA,cAAC,WAAQ,MAAM,0BAA0B;AAAA,IACxD,SAAS,MACP,8BAAAA,QAAA,cAAC,SAAM,MAAK,aAAU,iCAA+B;AAAA,IAEvD,OAAO,MAAM;AAAA,IACb,cAAc,MAAM;AAAA,EACtB,CAAC,CACH;AAEJ;","names":["import_react","React","React"]}